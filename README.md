# Telegram-–±–æ—Ç –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

–ë–æ—Ç –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö –¥–∞—Ç –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è Yandex Calendar —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∫–Ω–∏–≥–∏ –∏–∑ API "–°–≤–µ—Ç".

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- üìÖ –ü–∞—Ä—Å–∏—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö –¥–∞—Ç –∏–∑ Yandex Calendar
- üìö –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç –∫–Ω–∏–≥–∏ –∞–≤—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ GraphQL API
- üîó –§–æ—Ä–º–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∫–Ω–∏–≥–∏
- ‚è∞ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Ä–∞—Å—Å—ã–ª–∫—É –≤ –≥—Ä—É–ø–ø—É Telegram
- üé® –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å —ç–º–æ–¥–∑–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Telegram –±–æ—Ç (–ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —É @BotFather)
- –î–æ—Å—Ç—É–ø –∫ GraphQL API "–°–≤–µ—Ç"
- –ì—Ä—É–ø–ø–∞ –≤ Telegram –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

```bash
pip install -r requirements_bot.txt
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**

–û—Ç–∫—Ä–æ–π—Ç–µ `literary_calendar_bot_config.py` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```python
BOT_TOKEN = "–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞"
GRAPHQL_ENDPOINT = "https://–≤–∞—à-api-endpoint.com/graphql"
GROUP_CHAT_ID = "id_–≤–∞—à–µ–π_–≥—Ä—É–ø–ø—ã"
```

3. **–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:**

- –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
- –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥

4. **–ü–æ–ª—É—á–∏—Ç–µ ID –≥—Ä—É–ø–ø—ã:**

- –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot) –≤ –≤–∞—à—É –≥—Ä—É–ø–ø—É
- –û–Ω –ø–æ–∫–∞–∂–µ—Ç ID –≥—Ä—É–ø–ø—ã
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [@RawDataBot](https://t.me/RawDataBot)

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Ñ–∞–π–ª–æ–º

```python
from literary_calendar_bot import LiteraryCalendarBot
import asyncio
import literary_calendar_bot_config as config

async def main():
    bot = LiteraryCalendarBot(
        bot_token=config.BOT_TOKEN,
        calendar_url=config.CALENDAR_URL,
        graphql_endpoint=config.GRAPHQL_ENDPOINT,
        group_chat_id=config.GROUP_CHAT_ID
    )
    await bot.run_daily()

if __name__ == "__main__":
    asyncio.run(main())
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

```python
from literary_calendar_bot import LiteraryCalendarBot
import asyncio
import literary_calendar_bot_config as config

async def test():
    bot = LiteraryCalendarBot(
        bot_token=config.BOT_TOKEN,
        calendar_url=config.CALENDAR_URL,
        graphql_endpoint=config.GRAPHQL_ENDPOINT,
        group_chat_id=config.GROUP_CHAT_ID
    )
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
    await bot.send_daily_digest()

asyncio.run(test())
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ó–∞–ø—É—Å–∫ –∫–∞–∫ —Å–µ—Ä–≤–∏—Å (Linux)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/literary-bot.service`:

```ini
[Unit]
Description=Literary Calendar Telegram Bot
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/bot
ExecStart=/usr/bin/python3 /path/to/bot/literary_calendar_bot.py
Restart=always

[Install]
WantedBy=multi-user.target
```

–ó–∞–ø—É—Å–∫:

```bash
sudo systemctl enable literary-bot
sudo systemctl start literary-bot
```

## üìù –ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è

–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```
üìö –ê–Ω—Ç–æ–Ω –ß–µ—Ö–æ–≤ —Ä–æ–¥–∏–ª—Å—è –≤ 1860 –≥–æ–¥—É

üìÖ 29 —è–Ω–≤–∞—Ä—è 2026

–ö–Ω–∏–≥–∏ –ß–µ—Ö–æ–≤–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

üìñ –ö–Ω–∏–≥–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ¬´–°–≤–µ—Ç¬ª:
‚Ä¢ –í–∏—à–Ω–µ–≤—ã–π —Å–∞–¥
‚Ä¢ –î–∞–º–∞ —Å —Å–æ–±–∞—á–∫–æ–π
‚Ä¢ –ü–∞–ª–∞—Ç–∞ ‚Ññ6

üîó –°—Å—ã–ª–∫–∏:
–û—Ç–∫—Ä—ã—Ç—å –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

–í `literary_calendar_bot_config.py`:

```python
SEND_HOUR = 9  # –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è (0-23)
```

–í –∫–æ–¥–µ –±–æ—Ç–∞ –∏–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –≤—Ä–µ–º–µ–Ω–∏:

```python
if now.hour == SEND_HOUR and now.minute == 0:
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–Ω–∏–≥

–í –º–µ—Ç–æ–¥–µ `format_event_message` –∏–∑–º–µ–Ω–∏—Ç–µ:

```python
for book in books[:5]:  # –ò–∑–º–µ–Ω–∏—Ç–µ 5 –Ω–∞ –Ω—É–∂–Ω–æ–µ —á–∏—Å–ª–æ
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π

–î–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ –º–µ—Ç–æ–¥ `get_today_events`:

```python
# –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è —Å –∞–≤—Ç–æ—Ä–∞–º–∏
today_events = [e for e in today_events if e['author_uuids']]
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID –≥—Ä—É–ø–ø—ã
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞

### –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

–ö–∞–ª–µ–Ω–¥–∞—Ä—å Yandex –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å —Ñ–æ—Ä–º–∞—Ç. –ï—Å–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç XML/HTML –∫–∞–ª–µ–Ω–¥–∞—Ä—è
2. –û–±–Ω–æ–≤–∏—Ç–µ –º–µ—Ç–æ–¥ `parse_calendar` –ø–æ–¥ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ `_simple_parse`

### –û—à–∏–±–∫–∏ API

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL GraphQL API
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ª–æ–≥–∞—Ö

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –±–æ—Ç—É

```python
from telegram import Update
from telegram.ext import Application, CommandHandler

async def start(update: Update, context):
    await update.message.reply_text("–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è.")

app = Application.builder().token(BOT_TOKEN).build()
app.add_handler(CommandHandler("start", start))
app.run_polling()
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É

–î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/today`:

```python
async def today_command(update: Update, context):
    bot = LiteraryCalendarBot(...)
    await bot.send_daily_digest()
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ `get_today_events` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–°–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π.

## ü§ù –í–∫–ª–∞–¥

–ï—Å–ª–∏ –Ω–∞—à–ª–∏ –æ—à–∏–±–∫–∏ –∏–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å –±–æ—Ç–∞ - —Å–æ–∑–¥–∞–π—Ç–µ issue –∏–ª–∏ pull request!
