<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö –†–µ–¥–∞–∫—Ç–æ—Ä –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–≥–æ –ö–∞–ª–µ–Ω–¥–∞—Ä—è</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–π –ö–∞–ª–µ–Ω–¥–∞—Ä—å 2025</h1>
            <p>–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∫–Ω–∏–≥–∏</p>
        </div>

        <div class="content">
            <div id="message"></div>

            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="total-events">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ —Å–æ–±—ã—Ç–∏–π</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="today-events">0</div>
                    <div class="stat-label">–°–æ–±—ã—Ç–∏–π —Å–µ–≥–æ–¥–Ω—è</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-references">0</div>
                    <div class="stat-label">–°—Å—ã–ª–æ–∫ –Ω–∞ –∫–Ω–∏–≥–∏</div>
                </div>
            </div>

            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('view', this)">üìñ –ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                <button class="tab-btn" onclick="switchTab('add', this)">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
                <button class="tab-btn" onclick="switchTab('references', this)">üîó –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–Ω–∏–≥–∏</button>
            </div>

            <!-- –¢–∞–± –ü—Ä–æ—Å–º–æ—Ç—Ä -->
            <div id="view" class="tab-content active">
                <div class="search-box">
                    <input type="text" id="search" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Å–æ–±—ã—Ç–∏—è..."
                           onkeyup="searchEvents()" style="max-width: 100%;">
                </div>
                <table class="events-table">
                    <thead>
                        <tr>
                            <th>üìÖ –î–∞—Ç–∞</th>
                            <th>üìù –ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>‚úèÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ</th>
                            <th>üìú –ì–æ–¥/–¥–∞—Ç–∞</th>
                            <th>üîó –°—Å—ã–ª–∫–∏</th>
                            <th>‚öôÔ∏è –î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="events-table-body">
                    </tbody>
                </table>
            </div>

            <!-- –¢–∞–± –î–æ–±–∞–≤–ª–µ–Ω–∏–µ -->
            <div id="add" class="tab-content">
                <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ</h2>
                <form onsubmit="addEvent(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="day">–î–µ–Ω—å (1-31)</label>
                            <input type="number" id="day" min="1" max="31" required>
                        </div>
                        <div class="form-group">
                            <label for="month">–ú–µ—Å—è—Ü</label>
                            <select id="month" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü</option>
                                <option value="1">–Ø–Ω–≤–∞—Ä—å</option>
                                <option value="2">–§–µ–≤—Ä–∞–ª—å</option>
                                <option value="3">–ú–∞—Ä—Ç</option>
                                <option value="4">–ê–ø—Ä–µ–ª—å</option>
                                <option value="5">–ú–∞–π</option>
                                <option value="6">–ò—é–Ω—å</option>
                                <option value="7">–ò—é–ª—å</option>
                                <option value="8">–ê–≤–≥—É—Å—Ç</option>
                                <option value="9">–°–µ–Ω—Ç—è–±—Ä—å</option>
                                <option value="10">–û–∫—Ç—è–±—Ä—å</option>
                                <option value="11">–ù–æ—è–±—Ä—å</option>
                                <option value="12">–î–µ–∫–∞–±—Ä—å</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è *</label>
                        <input type="text" id="title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –ê.–°. –ü—É—à–∫–∏–Ω–∞" required>
                    </div>

                    <div class="form-group">
                        <label for="event_type">–¢–∏–ø —Å–æ–±—ã—Ç–∏—è</label>
                        <select id="event_type">
                            <option value="–ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ">–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ</option>
                            <option value="–¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è">–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</option>
                            <option value="—Å–º–µ—Ä—Ç–∏">–î–µ–Ω—å —Å–º–µ—Ä—Ç–∏</option>
                            <option value="—é–±–∏–ª–µ–π">–Æ–±–∏–ª–µ–π</option>
                            <option value="–ø–∞–º—è—Ç–Ω–∞—è –¥–∞—Ç–∞">–ü–∞–º—è—Ç–Ω–∞—è –¥–∞—Ç–∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="year">–ì–æ–¥ –∏–ª–∏ –¥–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è</label>
                        <input type="text" id="year" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1799 –∏–ª–∏ 1799-06-06">
                        <small>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞/—é–±–∏–ª–µ–µ–≤</small>
                    </div>

                    <div class="form-group">
                        <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="description" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è..."></textarea>
                    </div>

                    <button type="submit" class="btn-primary">‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
                </form>
            </div>

            <!-- –¢–∞–± –°—Å—ã–ª–∫–∏ -->
            <div id="references" class="tab-content">
                <h2>üîó –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∫–Ω–∏–≥–∏</h2>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –∫–Ω–∏–≥—É –∏–ª–∏ –∞–≤—Ç–æ—Ä–∞:</p>

                <div class="form-row">
                    <div class="form-group">
                        <label for="event-month-select">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü</label>
                        <select id="event-month-select" onchange="loadEventsByMonth()">
                            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü --</option>
                            <option value="1">–Ø–Ω–≤–∞—Ä—å</option>
                            <option value="2">–§–µ–≤—Ä–∞–ª—å</option>
                            <option value="3">–ú–∞—Ä—Ç</option>
                            <option value="4">–ê–ø—Ä–µ–ª—å</option>
                            <option value="5">–ú–∞–π</option>
                            <option value="6">–ò—é–Ω—å</option>
                            <option value="7">–ò—é–ª—å</option>
                            <option value="8">–ê–≤–≥—É—Å—Ç</option>
                            <option value="9">–°–µ–Ω—Ç—è–±—Ä—å</option>
                            <option value="10">–û–∫—Ç—è–±—Ä—å</option>
                            <option value="11">–ù–æ—è–±—Ä—å</option>
                            <option value="12">–î–µ–∫–∞–±—Ä—å</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="event-select">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ</label>
                        <select id="event-select" onchange="loadEventReferences()" disabled>
                            <option value="">-- –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü --</option>
                        </select>
                    </div>
                </div>

                <div id="references-list"></div>

                <h3 style="margin-top: 30px;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É</h3>
                <form onsubmit="addReference(event)">
                    <div class="form-group">
                        <label for="ref-type">–¢–∏–ø —Å—Å—ã–ª–∫–∏</label>
                        <select id="ref-type" required>
                            <option value="author">–ê–≤—Ç–æ—Ä</option>
                            <option value="book">–ö–Ω–∏–≥–∞</option>
                            <option value="tag">–¢–µ–≥</option>
                            <option value="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="ref-name">–ù–∞–∑–≤–∞–Ω–∏–µ/–ò–º—è *</label>
                        <input type="text" id="ref-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê.–°. –ü—É—à–∫–∏–Ω" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="ref-uuid">UUID (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                            <input type="text" id="ref-uuid" placeholder="author-123">
                        </div>
                        <div class="form-group">
                            <label for="ref-slug">Slug (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                            <input type="text" id="ref-slug" placeholder="author-slug">
                        </div>
                    </div>

                    <button type="submit" class="btn-primary">üîó –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è -->
    <div id="editModal" class="modal" onclick="if(event.target === this) closeModal()">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ</h2>
                <button type="button" class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <form onsubmit="updateEvent(event)">
                <input type="hidden" id="edit-id">
                <div class="form-group">
                    <label for="edit-title">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="edit-title" required>
                </div>
                <div class="form-group">
                    <label for="edit-description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="edit-description"></textarea>
                </div>
                <div class="form-group">
                    <label for="edit-year">–ì–æ–¥ –∏–ª–∏ –¥–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è</label>
                    <input type="text" id="edit-year" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1799 –∏–ª–∏ 1799-06-06">
                    <small>–ü–æ–ª–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞—Å—á—ë—Ç –≤–æ–∑—Ä–∞—Å—Ç–æ–≤ –∏ —é–±–∏–ª–µ–µ–≤</small>
                </div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="submit" class="btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ -->
    <div id="referenceModal" class="modal" onclick="if(event.target === this) closeReferenceModal()">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</h2>
                <button type="button" class="close-btn" onclick="closeReferenceModal()">&times;</button>
            </div>
            <form onsubmit="updateReference(event)">
                <input type="hidden" id="edit-ref-id">
                <input type="hidden" id="edit-event-id">
                <div class="form-group">
                    <label for="edit-ref-type">–¢–∏–ø —Å—Å—ã–ª–∫–∏</label>
                    <select id="edit-ref-type" required>
                        <option value="author">–ê–≤—Ç–æ—Ä</option>
                        <option value="book">–ö–Ω–∏–≥–∞</option>
                        <option value="tag">–¢–µ–≥</option>
                        <option value="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-ref-name">–ù–∞–∑–≤–∞–Ω–∏–µ/–ò–º—è</label>
                    <input type="text" id="edit-ref-name" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-ref-uuid">UUID</label>
                        <input type="text" id="edit-ref-uuid" placeholder="–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ">
                    </div>
                    <div class="form-group">
                        <label for="edit-ref-slug">Slug</label>
                        <input type="text" id="edit-ref-slug" placeholder="–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ">
                    </div>
                </div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="submit" class="btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn-secondary" onclick="closeReferenceModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>

